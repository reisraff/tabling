var tabling=function(e){var n=this;return n.elementId=e.elementId||"",n.endingpointUrl=e.endingpointUrl||"",n.columns=[],n.paginator=e.paginator||{},n.paginator.numberOfPages=n.paginator.numberOfPages||5,n.paginator.firstLast=n.paginator.firstLast||!0,n.paginator.prevNext=n.paginator.prevNext||!0,n.paginator.classWhenActive=n.paginator.classWhenActived||"active",n.paginator.classWhenDisabled=n.paginator.classWhenDisabled||"disabled",n.pagination={currentPage:0,totalPages:0},n.sorting=e.sorting||{},n.sorting.ascClass=n.sorting.ascClass||"tabling-sort-asc",n.sorting.descClass=n.sorting.descClass||"tabling-sort-desc",n.sorting.noneClass=n.sorting.noneClass||"tabling-sort-none",n.dataSort=[],n.listeners=[],n.requestHandler=function(){return{}},n.responseHandler=function(e){},n.paginationHandler=function(e){},n.sortingHandler=function(e){},n.flush=function(){n.lineParent.innerHTML=""},n.handleEvent=function(e){for(var n=listeners.length-1;n>=0;n--)listeners[n].e==e.type&&listeners[n].c(e.target,e)},n.request=function(){var e=new XMLHttpRequest;e.open("POST",n.endingpointUrl,!0);var a=n.requestHandler();if(void 0!=a.headers&&null!=a.headers)for(var t=a.headers.length-1;t>=0;t--)e.setRequestHeader(a.headers[t].header,a.headers[t].value);e.onreadystatechange=function(){4==e.readyState&&200==e.status&&n.responseHandler(e.responseText)},e.send(JSON.stringify(a.data))},n.addLine=function(e){var a=n.line.cloneNode(!0);Object.keys(e).map(function(n){var t=a.querySelector("*[column-id="+n+"]");null!==t&&(t.innerHTML=e[n])});for(var t="",r=0;r<a.children.length;r++)for(var s=a.children[r];t=s.innerHTML.match(/%([a-zA-Z0-9-_]+)%/);){var i=a.querySelector("*[column-id="+t[1]+"]");s.innerHTML=null!==i?s.innerHTML.replace(t[0],i.innerHTML):s.innerHTML.replace(t[0],"")}n.columns.map(function(e){var n=a.querySelector("*[column-id="+e+"]");void 0!==n&&null!==n&&(n.style.display="none")}),n.lineParent.append(a)},n.addLines=function(e){for(var a=0;a<e.length;a++)n.addLine(e[a])},n.on=function(e,a){if("function"!=typeof a)throw new Error("It is not a funcitons");n.listeners.push({e:e,c:a})},n.updatePagination=function(){for(var e=n.page.parentNode.querySelectorAll("*[dinamic-page]"),a=e.length-1;a>=0;a--)e[a].remove();var t=Math.floor(n.paginator.numberOfPages/2);center=n.paginator.numberOfPages%2!=0?t+1:t;var r=1;if(n.pagination.currentPage>center&&(r=n.pagination.currentPage-t+n.paginator.numberOfPages-1>n.pagination.totalPages?n.pagination.totalPages-n.paginator.numberOfPages+1:n.pagination.currentPage-t),n.paginator.firstLast){var s=n.page.parentNode.querySelector("*[first-page]");1==n.pagination.currentPage?s.classList.add(n.paginator.classWhenDisabled):s.classList.remove(n.paginator.classWhenDisabled);var i=n.page.parentNode.querySelector("*[last-page]");n.pagination.currentPage==n.pagination.totalPages?i.classList.add(n.paginator.classWhenDisabled):i.classList.remove(n.paginator.classWhenDisabled)}if(n.paginator.prevNext){var o=n.page.parentNode.querySelector("*[prev-page]");n.pagination.currentPage-1<1?o.classList.add(n.paginator.classWhenDisabled):o.classList.remove(n.paginator.classWhenDisabled);var l=n.page.parentNode.querySelector("*[next-page]");n.pagination.currentPage+1>n.pagination.totalPages?l.classList.add(n.paginator.classWhenDisabled):l.classList.remove(n.paginator.classWhenDisabled)}for(var a=r;a<r+n.paginator.numberOfPages;a++)!function(){var e=n.pageClone.cloneNode(!0);if(e.setAttribute("dinamic-page","true"),a>n.pagination.totalPages)e.innerHTML=e.innerHTML.replace("%page%","-"),e.classList.add(n.paginator.classWhenDisabled);else{e.innerHTML=e.innerHTML.replace("%page%",a),a==n.pagination.currentPage&&e.classList.add(n.paginator.classWhenActive);var t=a;e.addEventListener("click",function(){n.paginate(t)})}n.page.parentNode.insertBefore(e,n.page)}()},n.paginate=function(e){var a=n.pagination.currentPage;switch(e){case"first":a=1;break;case"last":a=n.pagination.totalPages;break;case"next":a=++a;break;case"prev":a=--a;break;default:a=e}a>0&&a<=n.pagination.totalPages&&n.paginationHandler(a)},n.doSort=function(e){var a=e.getAttribute("sort-direction"),t=e.getAttribute("column-id");if(null!=t&&""!=t){var r=null;Object.keys(n.dataSort).map(function(e){n.dataSort[e].column==t&&(r=e)}),null==r&&(n.dataSort.push({column:t,direction:"asc"}),r=n.dataSort.length-1),""==a||null==a?(e.setAttribute("sort-direction","asc"),e.classList.remove(n.sorting.noneClass),e.classList.remove(n.sorting.descClass),e.classList.add(n.sorting.ascClass),n.dataSort[r].direction="asc"):"asc"==a?(e.setAttribute("sort-direction","desc"),e.classList.remove(n.sorting.noneClass),e.classList.remove(n.sorting.ascClass),e.classList.add(n.sorting.descClass),n.dataSort[r].direction="desc"):(e.setAttribute("sort-direction",""),e.classList.remove(n.sorting.descClass),e.classList.remove(n.sorting.ascClass),e.classList.add(n.sorting.noneClass),n.dataSort.splice(r,1))}n.sortingHandler(n.dataSort)},n.hideColumn=function(e){for(var a=n.table.querySelectorAll("*[column-id="+e+"]"),t=a.length-1;t>=0;t--)a[t].style.display="none";n.columns.push(e)},n.showColumn=function(e){for(var a=n.table.querySelectorAll("*[column-id="+e+"]"),t=a.length-1;t>=0;t--)a[t].style.display="";n.columns=n.columns.filter(function(n){return n!==e})},function(){if(n.table=document.getElementById(n.elementId),!n.table)throw new Error("Does not exists element with this ID.");n.line=n.table.querySelector("*[line]"),n.lineParent=n.line.parentNode,n.flush();for(var e=n.table.querySelectorAll("*[handle-event]"),a=e.length-1;a>=0;a--){var t=e[a],r=t.getAttribute("handle-event");if(""===r)for(var s in t)0===s.search("on")&&t.addEventListener(s.slice(2),n.handleEvent);else r.split(",").map(function(e){t.addEventListener(e,n.handleEvent)})}for(var e=n.table.querySelectorAll("*[sortable]"),a=e.length-1;a>=0;a--){var t=e[a];t.classList.add(n.sorting.noneClass),t.addEventListener("click",function(e){n.doSort(e.target)})}if(n.paginator.firstLast){n.table.querySelector("*[first-page]").addEventListener("click",function(){n.paginate("first")});n.table.querySelector("*[last-page]").addEventListener("click",function(){n.paginate("last")})}if(n.paginator.prevNext){n.table.querySelector("*[prev-page]").addEventListener("click",function(){n.paginate("prev")});n.table.querySelector("*[next-page]").addEventListener("click",function(){n.paginate("next")})}n.page=n.table.querySelector("*[page]"),n.pageClone=n.page.cloneNode(!0),n.page.style.display="none"}(),{on:n.on,flush:n.flush,addLine:n.addLine,addLines:n.addLines,request:n.request,hideColumn:n.hideColumn,showColumn:n.showColumn,setPagination:function(e){n.pagination=e,n.updatePagination()},setPaginationHandler:function(e){n.paginationHandler=e},setResponseHandler:function(e){n.responseHandler=e},setSortingHandler:function(e){n.sortingHandler=e},setRequestHandler:function(e){n.requestHandler=e},init:function(){n.request()}}};!function(){var e=document.createElement("style");e.innerHTML='.tabling-sort-none::{content: "";}.tabling-sort-asc::after{content:" \\2193"}.tabling-sort-desc::after{content:" \\2191"}';var n=document.currentScript;n.parentNode.insertBefore(e,n)}();