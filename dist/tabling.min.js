var tabling=function(e){var t=this;return t.elementId=e.elementId||"",t.endingpointUrl=e.endingpointUrl||"",t.columns=[],t.paginator=e.paginator||{},t.paginator.numberOfPages=t.paginator.numberOfPages||5,t.paginator.page=void 0===t.paginator.page||t.paginator.page,t.paginator.firstLast=void 0===t.paginator.firstLast||t.paginator.firstLast,t.paginator.prevNext=void 0===t.paginator.prevNext||t.paginator.prevNext,t.paginator.classWhenActive=t.paginator.classWhenActived||"active",t.paginator.classWhenDisabled=t.paginator.classWhenDisabled||"disabled",t.pagination={currentPage:0,totalPages:0},t.sorting=e.sorting||{},t.sorting.ascClass=t.sorting.ascClass||"tabling-sort-asc",t.sorting.descClass=t.sorting.descClass||"tabling-sort-desc",t.sorting.noneClass=t.sorting.noneClass||"tabling-sort-none",t.dataSort=e.dataSort||[],t.listeners=[],t.formatters=[],t.requestHandler=function(){return{}},t.responseHandler=function(e){},t.paginationHandler=function(e){},t.sortingHandler=function(e){},t.flush=function(){t.lineParent.innerHTML=""},t.handleEvent=function(e){for(var t=listeners.length-1;t>=0;t--)listeners[t].e==e.type&&listeners[t].c(e.target,e)},t.request=function(){var e=new XMLHttpRequest;e.open("POST",t.endingpointUrl,!0);var a=t.requestHandler();if(void 0!=a.headers&&null!=a.headers)for(var n=a.headers.length-1;n>=0;n--)e.setRequestHeader(a.headers[n].header,a.headers[n].value);e.onreadystatechange=function(){4==e.readyState&&200==e.status&&t.responseHandler(e.responseText)},e.send(JSON.stringify(a.data))},t.addLine=function(e){var a=t.line.cloneNode(!0);Object.keys(e).map(function(n){var r=a.querySelector("*[column-id="+n+"]");if(null!==r)if(r.innerHTML.match(/%data%/))r.innerHTML=r.innerHTML.replace(/%data%/,e[n].trim());else if(null!=r.getAttribute("formatter")&&void 0!=r.getAttribute("formatter"))for(var i=t.formatters.length-1;i>=0;i--)t.formatters[i].f==r.getAttribute("formatter")&&(r.innerHTML=t.formatters[i].c(e[n]));else r.innerHTML=e[n]});for(var n="",r=0;r<a.children.length;r++)for(var i=a.children[r];n=i.innerHTML.match(/%([a-zA-Z0-9-_]+)%/);){var s=a.querySelector("*[column-id="+n[1]+"]");i.innerHTML=null!==s?i.innerHTML.replace(n[0],s.innerHTML):i.innerHTML.replace(n[0],"")}t.columns.map(function(e){var t=a.querySelector("*[column-id="+e+"]");void 0!==t&&null!==t&&(t.style.display="none")}),t.lineParent.appendChild(a)},t.addLines=function(e){for(var a=0;a<e.length;a++)t.addLine(e[a])},t.on=function(e,a){if("function"!=typeof a)throw new Error("It is not a funcitons");t.listeners.push({e:e,c:a})},t.addFormatter=function(e,a){if("function"!=typeof a)throw new Error("It is not a funcitons");t.formatters.push({f:e,c:a})},t.updatePagination=function(){for(var e=t.page.parentNode.querySelectorAll("*[dinamic-page]"),a=e.length-1;a>=0;a--)e[a].remove();var n=Math.floor(t.paginator.numberOfPages/2);center=t.paginator.numberOfPages%2!=0?n+1:n;var r=1;if(t.pagination.currentPage>center&&(t.pagination.currentPage-n+t.paginator.numberOfPages-1>t.pagination.totalPages?(r=t.pagination.totalPages-t.paginator.numberOfPages+1,r=r<1?1:r):r=t.pagination.currentPage-n),t.paginator.firstLast){var i=t.page.parentNode.querySelector("*[first-page]");1==t.pagination.currentPage?i.classList.add(t.paginator.classWhenDisabled):i.classList.remove(t.paginator.classWhenDisabled);var s=t.page.parentNode.querySelector("*[last-page]");t.pagination.currentPage==t.pagination.totalPages?s.classList.add(t.paginator.classWhenDisabled):s.classList.remove(t.paginator.classWhenDisabled)}if(t.paginator.prevNext){var o=t.page.parentNode.querySelector("*[prev-page]");t.pagination.currentPage-1<1?o.classList.add(t.paginator.classWhenDisabled):o.classList.remove(t.paginator.classWhenDisabled);var l=t.page.parentNode.querySelector("*[next-page]");t.pagination.currentPage+1>t.pagination.totalPages?l.classList.add(t.paginator.classWhenDisabled):l.classList.remove(t.paginator.classWhenDisabled)}for(var a=r;a<r+t.paginator.numberOfPages;a++)!function(){var e=t.pageClone.cloneNode(!0);if(e.setAttribute("dinamic-page","true"),a>t.pagination.totalPages)e.innerHTML=e.innerHTML.replace("%page%","-"),e.classList.add(t.paginator.classWhenDisabled);else{e.innerHTML=e.innerHTML.replace("%page%",a),a==t.pagination.currentPage&&e.classList.add(t.paginator.classWhenActive);var n=a;e.addEventListener("click",function(){t.paginate(n)})}t.page.parentNode.insertBefore(e,t.page)}()},t.paginate=function(e){var a=t.pagination.currentPage;switch(e){case"first":a=1;break;case"last":a=t.pagination.totalPages;break;case"next":a=++a;break;case"prev":a=--a;break;default:a=e}a>0&&a<=t.pagination.totalPages&&t.paginationHandler(a)},t.doSort=function(e){var a=e.getAttribute("sort-direction"),n=e.getAttribute("column-id");if(null!=n&&""!=n){var r=null;Object.keys(t.dataSort).map(function(e){t.dataSort[e].column==n&&(r=e)}),null==r&&(t.dataSort.push({column:n,direction:"desc"}),r=t.dataSort.length-1),""==a||null==a?(e.setAttribute("sort-direction","desc"),e.classList.remove(t.sorting.noneClass),e.classList.remove(t.sorting.ascClass),e.classList.add(t.sorting.descClass),t.dataSort[r].direction="desc"):"desc"==a?(e.setAttribute("sort-direction","asc"),e.classList.remove(t.sorting.noneClass),e.classList.remove(t.sorting.descClass),e.classList.add(t.sorting.ascClass),t.dataSort[r].direction="asc"):(e.setAttribute("sort-direction",""),e.classList.remove(t.sorting.descClass),e.classList.remove(t.sorting.ascClass),e.classList.add(t.sorting.noneClass),t.dataSort.splice(r,1))}t.sortingHandler(t.dataSort)},t.hideColumn=function(e){for(var a=t.table.querySelectorAll("*[column-id="+e+"]"),n=a.length-1;n>=0;n--)a[n].style.display="none";t.columns.push(e)},t.showColumn=function(e){for(var a=t.table.querySelectorAll("*[column-id="+e+"]"),n=a.length-1;n>=0;n--)a[n].style.display="";t.columns=t.columns.filter(function(t){return t!==e})},function(){if(t.table=document.getElementById(t.elementId),!t.table)throw new Error("Does not exists element with this ID.");t.line=t.table.querySelector("*[line]"),t.lineParent=t.line.parentNode,t.flush();for(var e=t.table.querySelectorAll("*[handle-event]"),a=e.length-1;a>=0;a--){var n=e[a],r=n.getAttribute("handle-event");if(""===r)for(var i in n)0===i.search("on")&&n.addEventListener(i.slice(2),t.handleEvent);else r.split(",").map(function(e){n.addEventListener(e,t.handleEvent)})}for(var e=t.table.querySelectorAll("*[sortable]"),a=e.length-1;a>=0;a--){for(var n=e[a],s=n.getAttribute("column-id"),o=t.dataSort.length-1;o>=0;o--)t.dataSort[o].column==s?"desc"==t.dataSort[o].direction?(n.classList.add(t.sorting.descClass),n.setAttribute("sort-direction","desc")):(n.classList.add(t.sorting.ascClass),n.setAttribute("sort-direction","asc")):n.classList.add(t.sorting.noneClass);n.addEventListener("click",function(e){t.doSort(e.target)})}if(t.paginator.firstLast){t.table.querySelector("*[first-page]").addEventListener("click",function(){t.paginate("first")});t.table.querySelector("*[last-page]").addEventListener("click",function(){t.paginate("last")})}if(t.paginator.prevNext){t.table.querySelector("*[prev-page]").addEventListener("click",function(){t.paginate("prev")});t.table.querySelector("*[next-page]").addEventListener("click",function(){t.paginate("next")})}t.paginator.page&&(t.page=t.table.querySelector("*[page]"),t.pageClone=t.page.cloneNode(!0),t.page.style.display="none")}(),{on:t.on,addFormatter:t.addFormatter,flush:t.flush,addLine:t.addLine,addLines:t.addLines,request:t.request,hideColumn:t.hideColumn,showColumn:t.showColumn,setPagination:function(e){t.pagination=e,t.updatePagination()},setPaginationHandler:function(e){t.paginationHandler=e},setResponseHandler:function(e){t.responseHandler=e},setSortingHandler:function(e){t.sortingHandler=e},setRequestHandler:function(e){t.requestHandler=e},init:function(){t.request()}}};!function(){var e=document.createElement("style");e.innerHTML='.tabling-sort-none::{content: "";}.tabling-sort-asc::after{content:" \\25B4"}.tabling-sort-desc::after{content:" \\25BE"}',document.body.appendChild(e)}();