var tabling=function(e){var a=this;if(a.elementId=e.elementId||"",a.endingpointUrl=e.endingpointUrl||"",a.paginator=e.paginator||{},a.paginator.numberOfPages=a.paginator.numberOfPages||5,a.paginator.firstLast=a.paginator.firstLast||!0,a.paginator.prevNext=a.paginator.prevNext||!0,a.paginator.classWhenActive=a.paginator.classWhenActived||"active",a.paginator.classWhenDisabled=a.paginator.classWhenDisabled||"disabled",a.pagination={currentPage:0,totalPages:0},a.sorting=e.sorting||{},a.sorting.ascClass=a.sorting.ascClass||"tabling-sort-asc",a.sorting.descClass=a.sorting.descClass||"tabling-sort-desc",a.sorting.noneClass=a.sorting.noneClass||"tabling-sort-none",a.dataSort=[],a.listeners=[],a.prepareDataFilter=function(){return{}},a.requestHandler=function(e){},a.paginationHandler=function(e){},a.sortingHandler=function(e){},a.table=document.getElementById(a.elementId),!a.table)throw new Error("Does not exists element with this ID.");return a.line=self.table.querySelector("*[line]"),a.lineParent=a.line.parentNode,a.flush=function(){a.lineParent.innerHTML=""},a.handleEvent=function(e){for(var a=listeners.length-1;a>=0;a--)listeners[a].e==e.type&&listeners[a].c(e.target,e)},a.request=function(){var e=new XMLHttpRequest;e.open("POST",a.endingpointUrl,!0),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&a.requestHandler(JSON.parse(e.responseText))},e.send(JSON.stringify(a.prepareDataFilter()))},a.addLine=function(e){var t=a.line.cloneNode(!0);Object.keys(e).map(function(a){var n=t.querySelector("*[column-id="+a+"]");null!==n&&(n.innerHTML=e[a])});for(var n="",r=0;r<t.children.length;r++)for(var i=t.children[r];n=i.innerHTML.match(/%([a-zA-Z0-9-_]+)%/);){var s=t.querySelector("*[column-id="+n[1]+"]");i.innerHTML=null!==s?i.innerHTML.replace(n[0],s.innerHTML):i.innerHTML.replace(n[0],"")}a.lineParent.append(t)},a.addLines=function(e){for(var a=0;a<e.length;a++)table.addLine(e[a])},a.on=function(e,t){if("function"!=typeof t)throw new Error("It is not a funcitons");a.listeners.push({e:e,c:t})},a.updatePagination=function(){for(var e=a.pageParent.querySelectorAll("*[dinamic-page]"),t=e.length-1;t>=0;t--)e[t].remove();var n=Math.floor(a.paginator.numberOfPages/2);center=a.paginator.numberOfPages%2!=0?n+1:n;var r=1;if(a.pagination.currentPage>center&&(r=a.pagination.currentPage-n+a.paginator.numberOfPages-1>a.pagination.totalPages?a.pagination.totalPages-a.paginator.numberOfPages+1:a.pagination.currentPage-n),a.paginator.firstLast){var i=a.pageParent.querySelector("*[first-page]");1==a.pagination.currentPage?i.classList.add(a.paginator.classWhenDisabled):i.classList.remove(a.paginator.classWhenDisabled);var s=a.pageParent.querySelector("*[last-page]");a.pagination.currentPage==a.pagination.totalPages?s.classList.add(a.paginator.classWhenDisabled):s.classList.remove(a.paginator.classWhenDisabled)}if(a.paginator.prevNext){var o=a.pageParent.querySelector("*[prev-page]");a.pagination.currentPage-1<1?o.classList.add(a.paginator.classWhenDisabled):o.classList.remove(a.paginator.classWhenDisabled);var l=a.pageParent.querySelector("*[next-page]");a.pagination.currentPage+1>a.pagination.totalPages?l.classList.add(a.paginator.classWhenDisabled):l.classList.remove(a.paginator.classWhenDisabled)}for(var t=r;t<r+a.paginator.numberOfPages;t++)!function(){var e=a.pageClone.cloneNode(!0);if(e.setAttribute("dinamic-page","true"),t>a.pagination.totalPages)e.innerHTML=e.innerHTML.replace("%page%","-"),e.classList.add(a.paginator.classWhenDisabled);else{e.innerHTML=e.innerHTML.replace("%page%",t),t==a.pagination.currentPage&&e.classList.add(a.paginator.classWhenActive);var n=t;e.addEventListener("click",function(){a.paginate(n)})}a.pageParent.insertBefore(e,a.page)}()},a.paginate=function(e){var t=a.pagination.currentPage;switch(e){case"first":t=1;break;case"last":t=a.pagination.totalPages;break;case"next":t=++t;break;case"prev":t=--t;break;default:t=e}t>0&&t<=a.pagination.totalPages&&a.paginationHandler(t)},a.doSort=function(e){var t=e.getAttribute("sort-direction"),n=e.getAttribute("column-id");if(null!=n&&""!=n){var r=null;Object.keys(a.dataSort).map(function(e){a.dataSort[e].column==n&&(r=e)}),null==r&&(a.dataSort.push({column:n,direction:"asc"}),r=a.dataSort.length-1),""==t||null==t?(e.setAttribute("sort-direction","asc"),e.classList.remove(a.sorting.noneClass),e.classList.remove(a.sorting.descClass),e.classList.add(a.sorting.ascClass),a.dataSort[r].direction="asc"):"asc"==t?(e.setAttribute("sort-direction","desc"),e.classList.remove(a.sorting.noneClass),e.classList.remove(a.sorting.ascClass),e.classList.add(a.sorting.descClass),a.dataSort[r].direction="desc"):(e.setAttribute("sort-direction",""),e.classList.remove(a.sorting.descClass),e.classList.remove(a.sorting.ascClass),e.classList.add(a.sorting.noneClass),a.dataSort.splice(r,1))}a.sortingHandler(a.dataSort)},function(){a.flush();for(var e=a.table.querySelectorAll("*[handle-event]"),t=e.length-1;t>=0;t--){var n=e[t],r=n.getAttribute("handle-event");if(""===r)for(var i in n)0===i.search("on")&&n.addEventListener(i.slice(2),a.handleEvent);else r.split(",").map(function(e){n.addEventListener(e,a.handleEvent)})}for(var e=a.table.querySelectorAll("*[sortable]"),t=e.length-1;t>=0;t--){var n=e[t];n.classList.add(a.sorting.noneClass),n.addEventListener("click",function(e){a.doSort(e.target)})}if(a.paginator.firstLast){a.table.querySelector("*[first-page]").addEventListener("click",function(){a.paginate("first")});a.table.querySelector("*[last-page]").addEventListener("click",function(){a.paginate("last")})}if(a.paginator.prevNext){a.table.querySelector("*[prev-page]").addEventListener("click",function(){a.paginate("prev")});a.table.querySelector("*[next-page]").addEventListener("click",function(){a.paginate("next")})}a.page=a.table.querySelector("*[page]"),a.pageClone=a.page.cloneNode(!0),a.page.style.display="none",a.pageParent=a.page.parentNode}(),{on:a.on,flush:a.flush,addLine:a.addLine,addLines:a.addLines,request:a.request,setPagination:function(e){a.pagination=e,a.updatePagination()},setPaginationHandler:function(e){a.paginationHandler=e},setRequestHandler:function(e){a.requestHandler=e},setSortingHandler:function(e){a.sortingHandler=e},setPrepareDataFilter:function(e){a.prepareDataFilter=e},init:function(){a.request()}}};!function(){var e=document.createElement("style");e.innerHTML='.tabling-sort-none::{content: "";}.tabling-sort-asc::after{content:" \\2193"}.tabling-sort-desc::after{content:" \\2191"}';var a=document.currentScript;a.parentNode.insertBefore(e,a)}();