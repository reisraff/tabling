var tabling=function(e){var n=this;return n.elementId=e.elementId||"",n.endingpointUrl=e.endingpointUrl||"",n.columns=[],n.paginator=e.paginator||{},n.paginator.numberOfPages=n.paginator.numberOfPages||5,n.paginator.firstLast=n.paginator.firstLast||!0,n.paginator.prevNext=n.paginator.prevNext||!0,n.paginator.classWhenActive=n.paginator.classWhenActived||"active",n.paginator.classWhenDisabled=n.paginator.classWhenDisabled||"disabled",n.pagination={currentPage:0,totalPages:0},n.sorting=e.sorting||{},n.sorting.ascClass=n.sorting.ascClass||"tabling-sort-asc",n.sorting.descClass=n.sorting.descClass||"tabling-sort-desc",n.sorting.noneClass=n.sorting.noneClass||"tabling-sort-none",n.dataSort=[],n.listeners=[],n.formaters=[],n.requestHandler=function(){return{}},n.responseHandler=function(e){},n.paginationHandler=function(e){},n.sortingHandler=function(e){},n.flush=function(){n.lineParent.innerHTML=""},n.handleEvent=function(e){for(var n=listeners.length-1;n>=0;n--)listeners[n].e==e.type&&listeners[n].c(e.target,e)},n.request=function(){var e=new XMLHttpRequest;e.open("POST",n.endingpointUrl,!0);var t=n.requestHandler();if(void 0!=t.headers&&null!=t.headers)for(var a=t.headers.length-1;a>=0;a--)e.setRequestHeader(t.headers[a].header,t.headers[a].value);e.onreadystatechange=function(){4==e.readyState&&200==e.status&&n.responseHandler(e.responseText)},e.send(JSON.stringify(t.data))},n.addLine=function(e){var t=n.line.cloneNode(!0);Object.keys(e).map(function(a){var r=t.querySelector("*[column-id="+a+"]");if(null!==r)if(r.innerHTML.match(/%data%/))r.innerHTML=r.innerHTML.replace(/%data%/,e[a].trim());else if(null!=r.getAttribute("formater")&&void 0!=r.getAttribute("formater"))for(var i=n.formaters.length-1;i>=0;i--)n.formaters[i].f==r.getAttribute("formater")&&(r.innerHTML=n.formaters[i].c(e[a]));else r.innerHTML=e[a]});for(var a="",r=0;r<t.children.length;r++)for(var i=t.children[r];a=i.innerHTML.match(/%([a-zA-Z0-9-_]+)%/);){var s=t.querySelector("*[column-id="+a[1]+"]");i.innerHTML=null!==s?i.innerHTML.replace(a[0],s.innerHTML):i.innerHTML.replace(a[0],"")}n.columns.map(function(e){var n=t.querySelector("*[column-id="+e+"]");void 0!==n&&null!==n&&(n.style.display="none")}),n.lineParent.append(t)},n.addLines=function(e){for(var t=0;t<e.length;t++)n.addLine(e[t])},n.on=function(e,t){if("function"!=typeof t)throw new Error("It is not a funcitons");n.listeners.push({e:e,c:t})},n.addFormater=function(e,t){if("function"!=typeof t)throw new Error("It is not a funcitons");n.formaters.push({f:e,c:t})},n.updatePagination=function(){for(var e=n.page.parentNode.querySelectorAll("*[dinamic-page]"),t=e.length-1;t>=0;t--)e[t].remove();var a=Math.floor(n.paginator.numberOfPages/2);center=n.paginator.numberOfPages%2!=0?a+1:a;var r=1;if(n.pagination.currentPage>center&&(r=n.pagination.currentPage-a+n.paginator.numberOfPages-1>n.pagination.totalPages?n.pagination.totalPages-n.paginator.numberOfPages+1:n.pagination.currentPage-a),n.paginator.firstLast){var i=n.page.parentNode.querySelector("*[first-page]");1==n.pagination.currentPage?i.classList.add(n.paginator.classWhenDisabled):i.classList.remove(n.paginator.classWhenDisabled);var s=n.page.parentNode.querySelector("*[last-page]");n.pagination.currentPage==n.pagination.totalPages?s.classList.add(n.paginator.classWhenDisabled):s.classList.remove(n.paginator.classWhenDisabled)}if(n.paginator.prevNext){var o=n.page.parentNode.querySelector("*[prev-page]");n.pagination.currentPage-1<1?o.classList.add(n.paginator.classWhenDisabled):o.classList.remove(n.paginator.classWhenDisabled);var l=n.page.parentNode.querySelector("*[next-page]");n.pagination.currentPage+1>n.pagination.totalPages?l.classList.add(n.paginator.classWhenDisabled):l.classList.remove(n.paginator.classWhenDisabled)}for(var t=r;t<r+n.paginator.numberOfPages;t++)!function(){var e=n.pageClone.cloneNode(!0);if(e.setAttribute("dinamic-page","true"),t>n.pagination.totalPages)e.innerHTML=e.innerHTML.replace("%page%","-"),e.classList.add(n.paginator.classWhenDisabled);else{e.innerHTML=e.innerHTML.replace("%page%",t),t==n.pagination.currentPage&&e.classList.add(n.paginator.classWhenActive);var a=t;e.addEventListener("click",function(){n.paginate(a)})}n.page.parentNode.insertBefore(e,n.page)}()},n.paginate=function(e){var t=n.pagination.currentPage;switch(e){case"first":t=1;break;case"last":t=n.pagination.totalPages;break;case"next":t=++t;break;case"prev":t=--t;break;default:t=e}t>0&&t<=n.pagination.totalPages&&n.paginationHandler(t)},n.doSort=function(e){var t=e.getAttribute("sort-direction"),a=e.getAttribute("column-id");if(null!=a&&""!=a){var r=null;Object.keys(n.dataSort).map(function(e){n.dataSort[e].column==a&&(r=e)}),null==r&&(n.dataSort.push({column:a,direction:"asc"}),r=n.dataSort.length-1),""==t||null==t?(e.setAttribute("sort-direction","asc"),e.classList.remove(n.sorting.noneClass),e.classList.remove(n.sorting.descClass),e.classList.add(n.sorting.ascClass),n.dataSort[r].direction="asc"):"asc"==t?(e.setAttribute("sort-direction","desc"),e.classList.remove(n.sorting.noneClass),e.classList.remove(n.sorting.ascClass),e.classList.add(n.sorting.descClass),n.dataSort[r].direction="desc"):(e.setAttribute("sort-direction",""),e.classList.remove(n.sorting.descClass),e.classList.remove(n.sorting.ascClass),e.classList.add(n.sorting.noneClass),n.dataSort.splice(r,1))}n.sortingHandler(n.dataSort)},n.hideColumn=function(e){for(var t=n.table.querySelectorAll("*[column-id="+e+"]"),a=t.length-1;a>=0;a--)t[a].style.display="none";n.columns.push(e)},n.showColumn=function(e){for(var t=n.table.querySelectorAll("*[column-id="+e+"]"),a=t.length-1;a>=0;a--)t[a].style.display="";n.columns=n.columns.filter(function(n){return n!==e})},function(){if(n.table=document.getElementById(n.elementId),!n.table)throw new Error("Does not exists element with this ID.");n.line=n.table.querySelector("*[line]"),n.lineParent=n.line.parentNode,n.flush();for(var e=n.table.querySelectorAll("*[handle-event]"),t=e.length-1;t>=0;t--){var a=e[t],r=a.getAttribute("handle-event");if(""===r)for(var i in a)0===i.search("on")&&a.addEventListener(i.slice(2),n.handleEvent);else r.split(",").map(function(e){a.addEventListener(e,n.handleEvent)})}for(var e=n.table.querySelectorAll("*[sortable]"),t=e.length-1;t>=0;t--){var a=e[t];a.classList.add(n.sorting.noneClass),a.addEventListener("click",function(e){n.doSort(e.target)})}if(n.paginator.firstLast){n.table.querySelector("*[first-page]").addEventListener("click",function(){n.paginate("first")});n.table.querySelector("*[last-page]").addEventListener("click",function(){n.paginate("last")})}if(n.paginator.prevNext){n.table.querySelector("*[prev-page]").addEventListener("click",function(){n.paginate("prev")});n.table.querySelector("*[next-page]").addEventListener("click",function(){n.paginate("next")})}n.page=n.table.querySelector("*[page]"),n.pageClone=n.page.cloneNode(!0),n.page.style.display="none"}(),{on:n.on,addFormater:n.addFormater,flush:n.flush,addLine:n.addLine,addLines:n.addLines,request:n.request,hideColumn:n.hideColumn,showColumn:n.showColumn,setPagination:function(e){n.pagination=e,n.updatePagination()},setPaginationHandler:function(e){n.paginationHandler=e},setResponseHandler:function(e){n.responseHandler=e},setSortingHandler:function(e){n.sortingHandler=e},setRequestHandler:function(e){n.requestHandler=e},init:function(){n.request()}}};!function(){var e=document.createElement("style");e.innerHTML='.tabling-sort-none::{content: "";}.tabling-sort-asc::after{content:" \\2193"}.tabling-sort-desc::after{content:" \\2191"}';var n=document.currentScript;n.parentNode.insertBefore(e,n)}();