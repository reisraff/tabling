var tabling=function(e){var a=this;if(a.elementId=e.elementId||"",a.endingpointUrl=e.endingpointUrl||"",a.paginator=e.paginator||{},a.paginator.numberOfPages=a.paginator.numberOfPages||5,a.paginator.firstLast=a.paginator.firstLast||!0,a.paginator.prevNext=a.paginator.prevNext||!0,a.paginator.classWhenActive=a.paginator.classWhenActived||"active",a.paginator.classWhenDisabled=a.paginator.classWhenDisabled||"disabled",a.pagination={currentPage:0,totalPages:0},a.sorting=e.sorting||{},a.sorting.ascClass=a.sorting.ascClass||"tabling-sort-asc",a.sorting.descClass=a.sorting.descClass||"tabling-sort-desc",a.sorting.noneClass=a.sorting.noneClass||"tabling-sort-none",a.dataSort=[],a.listeners=[],a.requestHandler=function(){return{}},a.responseHandler=function(e){},a.paginationHandler=function(e){},a.sortingHandler=function(e){},a.table=document.getElementById(a.elementId),!a.table)throw new Error("Does not exists element with this ID.");return a.line=self.table.querySelector("*[line]"),a.lineParent=a.line.parentNode,a.flush=function(){a.lineParent.innerHTML=""},a.handleEvent=function(e){for(var a=listeners.length-1;a>=0;a--)listeners[a].e==e.type&&listeners[a].c(e.target,e)},a.request=function(){var e=new XMLHttpRequest;e.open("POST",a.endingpointUrl,!0);var n=a.requestHandler();if(void 0!=n.headers&&null!=n.headers)for(var t=n.headers.length-1;t>=0;t--)e.setRequestHeader(n.headers[t].header,n.headers[t].value);e.onreadystatechange=function(){4==e.readyState&&200==e.status&&a.responseHandler(e.responseText)},e.send(JSON.stringify(n.data))},a.addLine=function(e){var n=a.line.cloneNode(!0);Object.keys(e).map(function(a){var t=n.querySelector("*[column-id="+a+"]");null!==t&&(t.innerHTML=e[a])});for(var t="",r=0;r<n.children.length;r++)for(var s=n.children[r];t=s.innerHTML.match(/%([a-zA-Z0-9-_]+)%/);){var i=n.querySelector("*[column-id="+t[1]+"]");s.innerHTML=null!==i?s.innerHTML.replace(t[0],i.innerHTML):s.innerHTML.replace(t[0],"")}a.lineParent.append(n)},a.addLines=function(e){for(var a=0;a<e.length;a++)table.addLine(e[a])},a.on=function(e,n){if("function"!=typeof n)throw new Error("It is not a funcitons");a.listeners.push({e:e,c:n})},a.updatePagination=function(){for(var e=a.pageParent.querySelectorAll("*[dinamic-page]"),n=e.length-1;n>=0;n--)e[n].remove();var t=Math.floor(a.paginator.numberOfPages/2);center=a.paginator.numberOfPages%2!=0?t+1:t;var r=1;if(a.pagination.currentPage>center&&(r=a.pagination.currentPage-t+a.paginator.numberOfPages-1>a.pagination.totalPages?a.pagination.totalPages-a.paginator.numberOfPages+1:a.pagination.currentPage-t),a.paginator.firstLast){var s=a.pageParent.querySelector("*[first-page]");1==a.pagination.currentPage?s.classList.add(a.paginator.classWhenDisabled):s.classList.remove(a.paginator.classWhenDisabled);var i=a.pageParent.querySelector("*[last-page]");a.pagination.currentPage==a.pagination.totalPages?i.classList.add(a.paginator.classWhenDisabled):i.classList.remove(a.paginator.classWhenDisabled)}if(a.paginator.prevNext){var o=a.pageParent.querySelector("*[prev-page]");a.pagination.currentPage-1<1?o.classList.add(a.paginator.classWhenDisabled):o.classList.remove(a.paginator.classWhenDisabled);var l=a.pageParent.querySelector("*[next-page]");a.pagination.currentPage+1>a.pagination.totalPages?l.classList.add(a.paginator.classWhenDisabled):l.classList.remove(a.paginator.classWhenDisabled)}for(var n=r;n<r+a.paginator.numberOfPages;n++)!function(){var e=a.pageClone.cloneNode(!0);if(e.setAttribute("dinamic-page","true"),n>a.pagination.totalPages)e.innerHTML=e.innerHTML.replace("%page%","-"),e.classList.add(a.paginator.classWhenDisabled);else{e.innerHTML=e.innerHTML.replace("%page%",n),n==a.pagination.currentPage&&e.classList.add(a.paginator.classWhenActive);var t=n;e.addEventListener("click",function(){a.paginate(t)})}a.pageParent.insertBefore(e,a.page)}()},a.paginate=function(e){var n=a.pagination.currentPage;switch(e){case"first":n=1;break;case"last":n=a.pagination.totalPages;break;case"next":n=++n;break;case"prev":n=--n;break;default:n=e}n>0&&n<=a.pagination.totalPages&&a.paginationHandler(n)},a.doSort=function(e){var n=e.getAttribute("sort-direction"),t=e.getAttribute("column-id");if(null!=t&&""!=t){var r=null;Object.keys(a.dataSort).map(function(e){a.dataSort[e].column==t&&(r=e)}),null==r&&(a.dataSort.push({column:t,direction:"asc"}),r=a.dataSort.length-1),""==n||null==n?(e.setAttribute("sort-direction","asc"),e.classList.remove(a.sorting.noneClass),e.classList.remove(a.sorting.descClass),e.classList.add(a.sorting.ascClass),a.dataSort[r].direction="asc"):"asc"==n?(e.setAttribute("sort-direction","desc"),e.classList.remove(a.sorting.noneClass),e.classList.remove(a.sorting.ascClass),e.classList.add(a.sorting.descClass),a.dataSort[r].direction="desc"):(e.setAttribute("sort-direction",""),e.classList.remove(a.sorting.descClass),e.classList.remove(a.sorting.ascClass),e.classList.add(a.sorting.noneClass),a.dataSort.splice(r,1))}a.sortingHandler(a.dataSort)},function(){a.flush();for(var e=a.table.querySelectorAll("*[handle-event]"),n=e.length-1;n>=0;n--){var t=e[n],r=t.getAttribute("handle-event");if(""===r)for(var s in t)0===s.search("on")&&t.addEventListener(s.slice(2),a.handleEvent);else r.split(",").map(function(e){t.addEventListener(e,a.handleEvent)})}for(var e=a.table.querySelectorAll("*[sortable]"),n=e.length-1;n>=0;n--){var t=e[n];t.classList.add(a.sorting.noneClass),t.addEventListener("click",function(e){a.doSort(e.target)})}if(a.paginator.firstLast){a.table.querySelector("*[first-page]").addEventListener("click",function(){a.paginate("first")});a.table.querySelector("*[last-page]").addEventListener("click",function(){a.paginate("last")})}if(a.paginator.prevNext){a.table.querySelector("*[prev-page]").addEventListener("click",function(){a.paginate("prev")});a.table.querySelector("*[next-page]").addEventListener("click",function(){a.paginate("next")})}a.page=a.table.querySelector("*[page]"),a.pageClone=a.page.cloneNode(!0),a.page.style.display="none",a.pageParent=a.page.parentNode}(),{on:a.on,flush:a.flush,addLine:a.addLine,addLines:a.addLines,request:a.request,setPagination:function(e){a.pagination=e,a.updatePagination()},setPaginationHandler:function(e){a.paginationHandler=e},setResponseHandler:function(e){a.responseHandler=e},setSortingHandler:function(e){a.sortingHandler=e},setRequestHandler:function(e){a.requestHandler=e},init:function(){a.request()}}};!function(){var e=document.createElement("style");e.innerHTML='.tabling-sort-none::{content: "";}.tabling-sort-asc::after{content:" \\2193"}.tabling-sort-desc::after{content:" \\2191"}';var a=document.currentScript;a.parentNode.insertBefore(e,a)}();